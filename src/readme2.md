**Implementačna dokumentácia k 2. úlohe do IPP 2021/2022**
**Meno a priezvisko**: Adam Zvara
**Login**: xzvara01

## interpret.py

## test.php
Skript **test.php** je rozdelený do niekoľkých logických častí.
Prvou časťou je trieda **Context**, ktorá zabezpečuje spracovanie parametrov získaných pri spustení skriptu. Parametre sú spracované pomocou funkcie *getopt* a následne je skontrolovaná ich integrita v konštruktore samotnej triedy (existencia súborov/adresárov, konflikty parametrov).
Po spracovaní parametrov sa začína samotné testovanie. Na prehľadávanie adresárov s testovacími súbormi slúži trieda **DirectorySearch**, ktorá poskytuje metódu ***get_file()***, ktorá vráti cestu k následujúcemu testovaciemu súboru (s príponou '.src'). Vnútorne trieda využíva *RecursiveDirectoryIterator* a *RecursiveIteratorIterator*, ktoré rekurzívne prehľadávajú zadaný adresár (rekurzívne prehľadávanie sa dá obmedziť metódou *setMaxDepth()*). Následne pomocou *while* cyklu získavám súbory na testovanie. Na základe zvolených parametrov *--int-only*, *--parse-only* sa volá metóda *test()* konkrétneho testovacieho modulu.
![abc](https://i.imgur.com/25HPws4.png)
Existujú 3 testovacie moduly: **ParseTester**, **InterpretTester** a **MultiTester**, ktoré poskytujú metódu ***test()*** na otestovanie súboru. Abstraktná trieda **Tester** poskytuje všetkým zdedeným triedam názvy interprétov na spustenie (php8.1, python3) a zabezpečuje implementáciu metódy *test()* v jej potomkoch. Z nej zdedené triedy **SingleTester** a **MultiTester** obsahujú implementáciu metódy *test()*. Z triedy **SingleTester** dedia triedy *ParseTester* a *InterpretTester*.
Všetky implementácie metódy *test()* vytvárajú dočasné súbory v adresári aktuálne spusteného testu. Testovanie parseru alebo interpretu vytvára jeden dočasný súbor s názvom aktuálne spusteného testu a príponou *.tmp*. Testovanie oboch častí zároveň vytvára 2 dočasné súbory, ktorých názov je zložený z názvu tesu a prípon *.parse* (vytvorení po parsovaní) *.int* (vytvorený po interpretácii) aby bolo možné ručne skontrolovať výsledky po parsovaní a interpretácií. Ak nie je pri spustení *test.php* parameter *--noclean*, vytvorené dočasné súbory nie sú odstránené po dokončení testov. Návratové hodnoty tejto funkcie sú *true* v prípade, že test uspeje, v opačnom prípade *false*.
Tieto návratové hodnoty sa využívajú pri rozdelení testov na úspešné a neúspešné. Pole *allTests* slúži na uloženie mien adresárov, ktorých testy boli spustené. V 2D poliach *testsPassed* a *testsFailed* sú na prvej úrovni uložené názvy jednotlivých adresárov a na druhej úrovni sú mená konkrétných testov ktoré (ne)prešli.
Informácie o jednotlivých testoch sú ďalej použité v triede **HTMLCreator**, ktorá zabaľuje prácu pri vytváraní výsledného HTML dokumentu. Na jeho vytvorenie je použitá trieda *DOMImplementation*. Testované adresáre sú vypísané podľa abecedného poradia a jednotlivé testy sú zoradené podľa toho, či boli neúspešné (tie sú zobrazované ako prvé) alebo úspešné.